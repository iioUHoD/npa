import time
import paramiko

username = 'admin'

devices_ip = ['172.31.114.1', '172.31.114.2', '172.31.114.3', \
'172.31.114.4', '172.31.114.5', '172.31.114.6']

client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(hostname=devices_ip[5], username=username, look_for_keys=True)
with client.invoke_shell() as ssh:
    print("Connected to {} ...".format(devices_ip[5]))

    ssh.send("conf ter\n")
    time.sleep(1)
    ssh.send("int g0/2\n")
    time.sleep(1)
    ssh.send("ip address dhcp\n")
    time.sleep(1)
    ssh.send("no shut\n")
    time.sleep(1)
    ssh.send("int g0/1\n")
    time.sleep(1)
    ssh.send("ip address 172.31.114.49 255.255.255.240\n")
    time.sleep(1)
    ssh.send("no shut\n")
    time.sleep(1)

    ssh.send("ip route vrf control-data 0.0.0.0 0.0.0.0 g0/2\n")
    time.sleep(1)
    ssh.send("router ospf 10 vrf control-data\n")
    time.sleep(1)
    ssh.send("router-id 3.3.3.3\n")
    time.sleep(1)
    ssh.send("network 172.31.114.48 0.0.0.15 area 0\n")
    time.sleep(1)
    ssh.send("network 3.3.3.3 0.0.0.0 area 0\n")
    time.sleep(1)
    ssh.send("default-information originate\n")
    time.sleep(1)
    
    ssh.send("ip nat inside source list 1 interface g0/2 vrf control-data overload\n")
    time.sleep(1)
    ssh.send("access-list 1 permit 172.31.114.0 0.0.0.127\n")
    time.sleep(1)
    ssh.send("int g0/2\n")
    time.sleep(1)
    ssh.send("ip nat outside\n")
    time.sleep(1)
    ssh.send("int g0/1\n")
    time.sleep(1)
    ssh.send("ip nat inside\n")
    time.sleep(1)

    ssh.send("access-list 10 permit 172.31.114.0 0.0.0.15\n")
    time.sleep(1)
    ssh.send("access-list 10 permit 10.253.190.0 0.0.0.255\n")
    time.sleep(1)
    ssh.send("line vty 0 4\n")
    time.sleep(1)
    ssh.send("access-class 10 in\n")
    time.sleep(1)
    ssh.send("exit\n")
    time.sleep(1)


client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(hostname=devices_ip[4], username=username, look_for_keys=True)
with client.invoke_shell() as ssh:
    print("Connected to {} ...".format(devices_ip[4]))

    ssh.send("conf ter\n")
    time.sleep(1)
    ssh.send("int g0/2\n")
    time.sleep(1)
    ssh.send("ip address 172.31.114.50 255.255.255.240\n")
    time.sleep(1)
    ssh.send("no shut\n")
    time.sleep(1)
    ssh.send("int g0/1\n")
    time.sleep(1)
    ssh.send("ip address 172.31.114.33 255.255.255.240\n")
    time.sleep(1)
    ssh.send("no shut\n")
    time.sleep(1)
    ssh.send("router ospf 10 vrf control-data\n")
    time.sleep(1)
    ssh.send("router-id 2.2.2.2\n")
    time.sleep(1)
    ssh.send("network 172.31.114.48 0.0.0.15 area 0\n")
    time.sleep(1)
    ssh.send("network 172.31.114.32 0.0.0.15 area 0\n")
    time.sleep(1)
    ssh.send("network 2.2.2.2 0.0.0.0 area 0\n")
    time.sleep(1)

    ssh.send("access-list 10 permit 172.31.114.0 0.0.0.15\n")
    time.sleep(1)
    ssh.send("access-list 10 permit 10.253.190.0 0.0.0.255\n")
    time.sleep(1)
    ssh.send("line vty 0 4\n")
    time.sleep(1)
    ssh.send("access-class 10 in\n")
    time.sleep(1)
    ssh.send("exit\n")
    time.sleep(1)

client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(hostname=devices_ip[3], username=username, look_for_keys=True)
with client.invoke_shell() as ssh:
    print("Connected to {} ...".format(devices_ip[3]))

    ssh.send("conf ter\n")
    time.sleep(1)
    ssh.send("int g0/2\n")
    time.sleep(1)
    ssh.send("ip address 172.31.114.34 255.255.255.240\n")
    time.sleep(1)
    ssh.send("no shut\n")
    time.sleep(1)
    ssh.send("router ospf 10 vrf control-data\n")
    time.sleep(1)
    ssh.send("router-id 1.1.1.1\n")
    time.sleep(1)
    ssh.send("network 172.31.114.16 0.0.0.15 area 0\n")
    time.sleep(1)
    ssh.send("network 172.31.114.32 0.0.0.15 area 0\n")
    time.sleep(1)
    ssh.send("network 1.1.1.1 0.0.0.0 area 0\n")

    ssh.send("access-list 10 permit 172.31.114.0 0.0.0.15\n")
    time.sleep(1)
    ssh.send("access-list 10 permit 10.253.190.0 0.0.0.255\n")
    time.sleep(1)
    ssh.send("line vty 0 4\n")
    time.sleep(1)
    ssh.send("access-class 10 in\n")
    time.sleep(1)
    ssh.send("exit\n")
